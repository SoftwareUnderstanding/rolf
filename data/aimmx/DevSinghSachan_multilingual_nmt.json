{
    "visibility": {
        "visibility": "public"
    },
    "name": "Multilingual Translation",
    "definition": {
        "code": [
            {
                "type": "repo",
                "repo_type": "github",
                "owner": "DevSinghSachan",
                "owner_type": "User",
                "name": "multilingual_nmt",
                "url": "https://github.com/DevSinghSachan/multilingual_nmt",
                "stars": 43,
                "pushed_at": "2020-06-22 02:12:23+00:00",
                "created_at": "2018-03-20 01:36:02+00:00",
                "language": "Python",
                "description": "Experiments on Multilingual NMT",
                "frameworks": [
                    "PyTorch"
                ]
            },
            {
                "type": "code",
                "name": ".gitignore",
                "sha": "cdea5d8fa1c327498dfe47bdaab4dc099eeba078",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/.gitignore"
                    }
                },
                "size": 1225
            },
            {
                "type": "code",
                "name": "bin",
                "sha": "2eece55626be80b54385a2d11a4a53bdccae2790",
                "filetype": "dir",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/tree/master/bin"
                    }
                },
                "num_files": 6
            },
            {
                "type": "code",
                "name": "config.py",
                "sha": "d484c263ec837c6dfe33699efc01fe7f70d98c84",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/config.py"
                    }
                },
                "size": 11761
            },
            {
                "type": "code",
                "name": "convert.py",
                "sha": "94d95001231b7cd67945ca6775214ea2a1d6a889",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/convert.py"
                    }
                },
                "size": 4074
            },
            {
                "type": "code",
                "name": "data",
                "sha": "16a5022a92ce2713e83912f1f90fefc8c443eef0",
                "filetype": "dir",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/tree/master/data"
                    }
                },
                "num_files": 1
            },
            {
                "type": "code",
                "name": "data_parallel.py",
                "sha": "36c22388bba297c73c5f662b84e5364e1b063174",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/data_parallel.py"
                    }
                },
                "size": 5528
            },
            {
                "type": "code",
                "name": "data_statistics.py",
                "sha": "f4dda28a8bd86d02d9da9ecc601395c778b65622",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/data_statistics.py"
                    }
                },
                "size": 681
            },
            {
                "type": "code",
                "name": "download_teddata.sh",
                "sha": "22ddd6335c02f9264966ea4c6234d53dbc1b272a",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/download_teddata.sh"
                    }
                },
                "size": 139
            },
            {
                "type": "code",
                "name": "evaluator.py",
                "sha": "8f5690f4d1c90138ca920ea836e738a9a21aa296",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/evaluator.py"
                    }
                },
                "size": 13067
            },
            {
                "type": "code",
                "name": "exp_moving_avg.py",
                "sha": "c73a3612a427445822a08af61b96ea57640f96ef",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/exp_moving_avg.py"
                    }
                },
                "size": 862
            },
            {
                "type": "code",
                "name": "expert_utils.py",
                "sha": "90afcdaaa2d947037904d87ef0d5afc15d362986",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/expert_utils.py"
                    }
                },
                "size": 1832
            },
            {
                "type": "code",
                "name": "fp16_utils",
                "sha": "7b6f6a1d02322073fbaa4b564bc372ae8252cc00",
                "filetype": "dir",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/tree/master/fp16_utils"
                    }
                },
                "num_files": 4
            },
            {
                "type": "code",
                "name": "general_utils.py",
                "sha": "06fbc0e0f69eddc4240eb4c8aa156eddc4c3648e",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/general_utils.py"
                    }
                },
                "size": 4013
            },
            {
                "type": "code",
                "name": "legacy",
                "sha": "ce5b5774344a774f931aeb5276ae7da1c993afaf",
                "filetype": "dir",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/tree/master/legacy"
                    }
                },
                "num_files": 2
            },
            {
                "type": "code",
                "name": "models",
                "sha": "be88d4ff409a4556f575a69c364fef9e1eb8c179",
                "filetype": "dir",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/tree/master/models"
                    }
                },
                "num_files": 3
            },
            {
                "type": "code",
                "name": "multi_exp.py",
                "sha": "4fd94d8112758db3f32c0994861e5375fbc75c82",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/multi_exp.py"
                    }
                },
                "size": 2186
            },
            {
                "type": "code",
                "name": "multi_translate.py",
                "sha": "bb90d3c9f8891841f2b203b41f8427fae74f75d0",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/multi_translate.py"
                    }
                },
                "size": 1580
            },
            {
                "type": "code",
                "name": "optimizer",
                "sha": "3bd7343b05adef605e201e0921c9708ea7c75ef3",
                "filetype": "dir",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/tree/master/optimizer"
                    }
                },
                "num_files": 3
            },
            {
                "type": "code",
                "name": "paramsearch.py",
                "sha": "321f2f56097e9046e9764ab46fdd8841db539815",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/paramsearch.py"
                    }
                },
                "size": 1763
            },
            {
                "type": "code",
                "name": "preprocess.py",
                "sha": "566bf2a56c653d9e39346a621eb6fe7b9bcb7fd6",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/preprocess.py"
                    }
                },
                "size": 4832
            },
            {
                "type": "code",
                "name": "requirements.txt",
                "sha": "8c4864578a59375871fea099f53caf46baa5f2f8",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/requirements.txt"
                    }
                },
                "size": 105
            },
            {
                "type": "code",
                "name": "search_strategy.py",
                "sha": "5d25d50d01560efb31a9a6953f9f68f257613b01",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/search_strategy.py"
                    }
                },
                "size": 8639
            },
            {
                "type": "code",
                "name": "ted_reader.py",
                "sha": "e8dde1c60df5420caf24acc87211d36291051209",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/ted_reader.py"
                    }
                },
                "size": 6342
            },
            {
                "type": "code",
                "name": "tools",
                "sha": "9262083eb39dd4ac4187c065098703299f50c8ec",
                "filetype": "dir",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/tree/master/tools"
                    }
                },
                "num_files": 13
            },
            {
                "type": "code",
                "name": "train.py",
                "sha": "2de06f7d2c9c82ca18814e413621b1c7e6a0c0b5",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/train.py"
                    }
                },
                "size": 18993
            },
            {
                "type": "code",
                "name": "translate.py",
                "sha": "9c56e00b6795237f9fc8e160f5c2b89eb96d51ce",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/translate.py"
                    }
                },
                "size": 3155
            },
            {
                "type": "code",
                "name": "utils.py",
                "sha": "df10f0efc06f43fc2e293cd978b7397da7e4e7ac",
                "filetype": "file",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/blob/master/utils.py"
                    }
                },
                "size": 7585
            },
            {
                "type": "code",
                "name": "vis",
                "sha": "ae5fed81bd93055ffc709f6bc5e37aa90385077b",
                "filetype": "dir",
                "connection": {
                    "name": "github_url",
                    "source": {
                        "url": "https://github.com/DevSinghSachan/multilingual_nmt/tree/master/vis"
                    }
                },
                "num_files": 2
            }
        ]
    },
    "tags": [
        "transformer",
        "attention-is-all-you-need",
        "neural-machine-translation",
        "pytorch",
        "deep-learning",
        "nlp",
        "natural-language-processing",
        "attention-mechanism",
        "pytorch-implementation"
    ],
    "description": "Experiments on Multilingual NMT",
    "extraction": [
        {
            "type": "github",
            "url": "https://github.com/DevSinghSachan/multilingual_nmt",
            "stars": 43,
            "issues": true,
            "readme": "## Multilingual Translation\n\nThis codebase was used for the multilingual translation experiments for the paper \"[Parameter Sharing Methods for Multilingual Self-Attentional Translation Models](https://arxiv.org/abs/1809.00252), WMT-EMNLP 2018\".\n\nThe multilingual model is based on the *[Transformer](https://papers.nips.cc/paper/7181-attention-is-all-you-need.pdf)* model and also contains the following features:\n* positional encoding\n* multi-head dot-product attention\n* label smoothing\n* warm-up steps based training of Adam optimizer\n* shared weights of the embedding and softmax layers\n* beam search with length normalization\n* exponential moving average checkpoint of parameters\n\n## Requirements\nOne can install the required packages from the requirements file.\n```bash\npip install -r requirements.txt\n```\n\n## Dataset\n\n* Download the TED talks dataset as:\n```bash\nbash download_teddata.sh\n``` \nThis command will download, decompress, and will save the train, dev, and test splits of the TED talks under `data` directory.\n\n* One can use the script `ted_reader.py` to specify language pairs for both bilingual/multilingual translation tasks.\n- For bilingual/multilingual translation, just specify the source and target languages as\n```python\npython ted_reader.py -s ja en zh fr ro -t en zh fr ro ja\n``` \n- For multilingual translation, by default the training data will consist of the cartesian product of all the source and target language pairs. \n- If all possible combinations of the language pairs are not needed, then just use the option of `-ncp` \n```python\npython ted_reader.py -s ja en zh fr ro -t en zh fr ro ja -ncp\n```\n- Above command will only create training data for the corresponding language pairs, i.e. [(ja, en), (en, zh), (zh, fr), (fr, ro), (fr, ja)]\n\n* For evaluating the multiingual model, one can generate the test set for each bilingual pair using the above command.  \n\n## Instructions\nFor convenience, there are some example shell scripts under tools directory\n* Bilingual Translation (NS)\n```bash\nbash tools/bpe_pipeline_bilingual.sh src_lang tgt_lang\n```\n\n- Fully Shared Multilingual Translation (FS)\n```bash\nbash tools/bpe_pipeline_fully_shared_multilingual.sh src_lang tgt_lang1 tgt_lang2 \n```\n\n- Partial Sharing Multilingual Translation (PS)\n```bash\nbash tools/bpe_pipeline_MT.sh src_lang tgt_lang1 tgt_lang2 share_sublayer share_attn\n```\nAn example of sharing the Key(k), Query(q) in both the attention layers (Self, Source) \n```bash\nbash tools/bpe_pipeline_MT.sh src_lang tgt_lang1 tgt_lang2 k,q self,source\n```\n\n## Experiments\n\n* **Dataset Statistics**\n\n| Dataset | Train | Dev | Test |\n| --------------------------- |:-------:|------:|-------:|\n| English-Vietnamese (IWSLT 2015) | 133,317 | 1,553 | 1,268  |\n| English-German (TED talks)| 167,888 | 4,148 | 4,491 |\n| English-Romanian (TED talks)| 180,484 | 3,904 | 4,631 |\n| English-Dutch (TED talks)| 183,767 | 4,459 | 5,006 |\n\n\n* **Bilingual Translation Tasks**\n\n| language pairs |this repo |tensor2tensor| GNMT |\n| --------------------------- |:-------:|:------:|:-------:|\n| En -> Vi (IWSLT 2015) | 28.84 | 28.12 | 26.50 |\n| En -> De | 29.31 | 28.68 | 27.01 |\n| En -> Ro | 26.81 | 26.38 | 23.92 |\n| En -> Nl | 32.42 | 31.74 | 30.64 |\n| De -> En | 37.33 | 36.96 | 35.46 |\n| Ro -> En | 37.00 | 35.45 | 34.77 |\n| Nl -> En | 38.59 | 37.71 | 35.81 |\n\n\n* **Multilingual Translation Tasks**\n\n| Method | En->De+Tr | En->De+Ja | En->Ro+Fr | En->De+Nl |\n| :---- |:-------:|:------:|:-------:|:----:|\n|        | ->De  ->Tr | ->De ->Ja | ->Ro ->Fr | ->De ->Nl |\n| GNMT NS        |27.01 16.07|27.01 16.62|24.38 40.50|27.01 30.64|\n| GNMT FS        |29.07 18.09|28.24 17.33|26.41 42.46|28.52 31.72|\n| Transformer NS |29.31 18.62|29.31 17.92|26.81 42.95|29.31 32.43|\n| Transformer FS |28.74 18.69|29.68 18.50|**28.52 44.28**|30.45 33.69|\n| Transformer PS |**30.71 19.67**|**30.48 19.00**|27.58 43.84|**30.70 34.05**|\n\n\n## Citation\nIf you find this code useful, please consider citing our paper as:\n```\n@InProceedings{devendra2018multilingual,\n  author = \t\"Sachan, Devendra\n\t\tand Neubig, Graham,\n  title = \t\"Parameter Sharing Methods for Multilingual Self-Attentional Translation Models\",\n  booktitle = \t\"Proceedings of the Third Conference on Machine Translation\",\n  year = \t\"2018\",\n  publisher = \t\"Association for Computational Linguistics\",\n  location = \t\"Brussels, Belgium\"\n}\n```",
            "readme_url": "https://github.com/DevSinghSachan/multilingual_nmt",
            "frameworks": [
                "PyTorch"
            ]
        }
    ],
    "references": [
        {
            "title": "Parameter Sharing Methods for Multilingual Self-Attentional Translation Models",
            "arxiv": "1809.00252",
            "year": 2018,
            "url": "http://arxiv.org/abs/1809.00252v2",
            "abstract": "In multilingual neural machine translation, it has been shown that sharing a\nsingle translation model between multiple languages can achieve competitive\nperformance, sometimes even leading to performance gains over bilingually\ntrained models. However, these improvements are not uniform; often multilingual\nparameter sharing results in a decrease in accuracy due to translation models\nnot being able to accommodate different languages in their limited parameter\nspace. In this work, we examine parameter sharing techniques that strike a\nhappy medium between full sharing and individual training, specifically\nfocusing on the self-attentional Transformer model. We find that the full\nparameter sharing approach leads to increases in BLEU scores mainly when the\ntarget languages are from a similar language family. However, even in the case\nwhere target languages are from different families where full parameter sharing\nleads to a noticeable drop in BLEU scores, our proposed methods for partial\nsharing of parameters can lead to substantial improvements in translation\naccuracy.",
            "authors": [
                "Devendra Singh Sachan",
                "Graham Neubig"
            ]
        }
    ],
    "domain": {
        "domain_type": "Natural Language Processing",
        "domain_prob": 0.9994136011556214,
        "task": "Machine Translation",
        "task_prob": 0.9806852373357744
    }
}